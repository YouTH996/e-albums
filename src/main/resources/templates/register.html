<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Meta, title, CSS, favicons, etc. -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>e-albums注册</title>

        <!-- Bootstrap -->
        <link href="css/bootstrap.min1.css" rel="stylesheet">

        <style>

            .box1 {
                width: 30%;
                height: 1000px;
                float: left;
                background-repeat: no-repeat;
                background-image: url("http://localhost:8086/images/01-1.jpg");
                animation: frams 10s infinite;
            }

            @keyframes frams {
                0% {
                    background-image: url("http://localhost:8086/images/01-1.jpg");
                    background-size: 100% 100%;
                    background-repeat: no-repeat
                }
                33% {
                    background-image: url("http://localhost:8086/images/01-2.jpg");
                    background-size: 100% 100%;
                    background-repeat: no-repeat
                }
                66% {
                    background-image: url("http://localhost:8086/images/01-3.jpg");
                    background-size: 100% 100%;
                    background-repeat: no-repeat
                }
                100% {
                    background-image: url("http://localhost:8086/images/01-4.jpg");
                    background-size: 100% 100%;
                    background-repeat: no-repeat
                }
            }

            .box2 {
                float: left;
                width: 70%;
                height: 1000px;
                margin-left: 0;
                height: auto;
            }

        </style>


    </head>
    <body>
        <div class="box1">
        </div>
        <div class="box2">
            <h1 style="margin-left: 10%;margin-top: 10%">欢迎注册e-albums</h1>
            <h2 style="margin-left: 10%;margin-top: 5%">分享生活，留住感动</h2>
            <div class="x_content" style="display: block;margin-left: 10%">
                <br>
                <form id="registerForm" data-parsley-validate="" class="form-horizontal form-label-left" novalidate="">

                    <div class="item form-group">
                        <label class="col-form-label col-md-5 col-sm-3 label-align" for="username">用户名 <span
                                class="required" id="errorSpan1">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 ">
                            <input type="text" id="username" name="username" required="required" class="form-control ">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-5 col-sm-3 label-align" for="pwd1">密码 <span class="required"
                                                                                                        id="errorSpan2">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 ">
                            <input type="password" id="pwd1" name="pwd1" required="required" class="form-control">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label for="pwd2" class="col-form-label col-md-5 col-sm-3 label-align">重复密码<span
                                class="required" id="errorSpan3">*</span></label>
                        <div class="col-md-6 col-sm-6 ">
                            <input id="pwd2" class="form-control" type="password" name="pwd2">
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align">性别</label>
                        <div class="col-md-6 col-sm-6 ">
                            <div id="gender" class="btn-group" data-toggle="buttons">
                                <label class="btn btn-secondary" data-toggle-class="btn-primary"
                                       data-toggle-passive-class="btn-default">
                                    <input type="radio" name="gender" value="male" class="join-btn"
                                           data-parsley-multiple="gender" aria-selected="true"> &nbsp; 男 &nbsp;
                                </label>
                                <label class="btn btn-primary" data-toggle-class="btn-primary"
                                       data-toggle-passive-class="btn-default">
                                    <input type="radio" name="gender" value="female" class="join-btn"
                                           data-parsley-multiple="gender"> 女
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="item form-group">
                        <label class="col-form-label col-md-3 col-sm-3 label-align" for="email">邮箱 <span
                                class="required" id="errorSpan4">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 ">
                            <input type="text" id="email" name="email" required="required" class="form-control ">
                        </div>
                    </div>
                    <div class="item form-group">
                        <div class="col-md-6 col-sm-6 ">
                            <button class="btn btn-primary" type="button" id="sendCode">发送邮箱验证码
                            </button>
                            <span class="required"
                                  id="errorSpan6"></span>
                        </div>
                        <div class="col-md-3 col-sm-6 ">
                            <input type="text" id="verifyCode" name="verifyCode" required="required"
                                   class="form-control "
                                   placeholder="邮箱验证码" style="display: none"><span class="required"
                                                                                   id="errorSpan5"></span>
                        </div>

                    </div>
                    <div class="ln_solid"></div>
                    <div class="item form-group">
                        <div class="col-md-6 col-sm-6 offset-md-3" style="margin-left: 30%">
                            <a href="/">
                                <button class="btn btn-primary" type="button">返回登录</button>
                            </a>
                            <a href="/toRegister"></a>
                            <input type="button" class="btn btn-success" id="btnSubmit" value="立即注册"><span
                                class="required" id="errorSpan7"></span></input>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <script src="js/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("input[name='gender']").get(0).checked = true;
                $("#username").blur(function () {
                    if ($("#username").val() == "") {
                        $("#errorSpan1").text("用户名不能为空！").css("color", "red");
                    }
                });
                $("#pwd1").blur(function () {
                    if ($("#pwd1").val() == "") {
                        $("#errorSpan2").text("密码不能为空！").css("color", "red");
                    }
                });
                $("#pwd2").blur(function () {
                    if ($("#pwd2").val() == "") {
                        $("#errorSpan3").text("重复密码不能为空！").css("color", "red");
                    }
                    if ($("#pwd2").val() != $("#pwd1").val()) {
                        $("#errorSpan3").text("两次密码不一致！").css("color", "red");
                    }
                });
                $("#email").blur(function () {
                    var emailReg = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                    if ($("#email").val() == "") {
                        $("#errorSpan4").text("邮箱不能为空！").css("color", "red");
                    }
                    if (!emailReg.test($("#email").val())) {
                        $("#errorSpan4").text("你输入的邮箱格式错误！").css("color", "red");
                    }
                });
                $("#verifyCode").blur(function () {
                    if ($("#verifyCode").val() == "") {
                        $("#errorSpan5").text("验证码不能为空！").css("color", "red");
                    }
                });
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#sendCode").click(function () {
                    var emailReg = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                    if ($("#username").val() == "" || $("#pwd1").val() == "" || $("#pwd2").val() != $("#pwd1").val() || $("#email").val() == "") {
                        $("#errorSpan5").text("信息有误，请检查！").css("color", "red");
                    } else if (!emailReg.test($("#email").val())) {
                        $("#errorSpan4").text("你输入的邮箱格式错误！").css("color", "red");
                    } else {
                        $("#verifyCode").show();
                        $("#errorSpan5").text("邮箱已发送至你的邮箱，请注意查收！并在十分钟之内注册！").css("color", "green");
                        $.post({
                            url: "/sendCode",
                            data: $("#registerForm").serialize(),
                            success: function (result) {
                                if ("" != (result)) {
                                    $("#errorSpan6").text(result).css("color", "red");
                                }
                            }
                        });
                    }
                })
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#btnSubmit").click(function () {
                    if ($("#username").val() == "" || $("#pwd1").val() == "" || $("#pwd2").val() != $("#pwd1").val() || $("#email").val() == "" || $("#verifyCode").val() == "") {
                        $("#errorSpan7").text("信息有误，请检查！").css("color", "red");
                    } else {
                        $.post({
                            url: "/registeUser",
                            data: $("#registerForm").serialize(),
                            success: function (result) {
                                if ("验证码错误" == (result)) {
                                    $("#errorSpan7").text("验证码错误!").css("color", "red");
                                } else {
                                    alert(result);
                                }
                            }
                        })
                    }
                })
            });

        </script>
    </body>
</html>
